# How to run hdf_visualizer.ipynb

This notebook can be divided into 4 parts: Visualize HDF5 Files, 
Search & Download using EUMDAC API, Extract Geo-Coordinates, Folium Map 
Generator.

## Part 0: Python Packages

This program uses several packages. Make sure you have those ready before 
running the notebook.

```bash
source ~/ENV3/bin/activate
pip install h5py
pip install astral
pip install plotly
pip install eumdac
pip install folium
pip install selenium
```

## Part ONE: Visualize HDF5 Files

This part is straightforward. It takes directory path as input and generate a 
dataframe and subplot of 10*10 matrices as output.

### Input: (Cell #3) data_path1, data_path2

* Here the program takes two directories containing day and night inference 
* hdf5 files as data_path1, data_path2, respectively
* Make sure to adjust the path accordingly; that's all you need to do here

### Output1: (dataframe) inference_df

inference_df is the main dataframe throughout this notebook.

### Output2: (subplot 10*10 matrix) generated by SLSTRFileNameParser.plot_image_matrix([dataframe])



## Part TWO: Search & Download using EUMDAC API

Before diving in, make sure you have register an account at 
[EUMETSAT](https://data.eumetsat.int/data/map/EO:EUM:DAT:0615?start=2020-02-15T22:29:06.913Z&end=2020-02-16T22:29:06.913Z&sort=start,time,0), as you will need api token to download data.

Follow the instructions to create a new account

Now login with your username and password





### API Token (Cell #2 of Part TWO)

Gte the API key from 

<https://api.eumetsat.int/api-key/>


export ESAT="~/esat"

You will need to copy the following fields to your computer

* consumer_key
* consumer_secret

store them in the files 

mkdir $ESAT
$ESAT/.consumer_key
$ESAT/.consumer_secret

You can find these information after you logged in.
The token would auto refresh.

mkdir $ESAT/data

### download needed files

TBD ???



### Adjust Your Working Directory

* Part TWO will create a directory named: 'ssts-additional-info/' on your 
* current working dir. Make sure this dir does not already exist.
* Under 'ssts-additional-info/', 100 directories will be further created for 
* each inference hdf files to store two files: xfdumanifest.xml (which 
* contains geo-coordinates), browse.jpg (raw image)
* After one SUCCESSFUL execution of Part TWO, there is no need to rerun 
* this part. 

## Part THREE: Extract Geo-Coordinates

There is nothing you need to change in this part. Just run. 

## Part FOUR: Folium Map Generator

There is again nothing you need to change in this part. Just run.

Note: This part will take quite a while.
After execution is done, a folium map (framed with geo-coordinates) will be 
created and save to the 100 folders in 'ssts-additional-info/'